<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡πÄ‡∏Å‡∏°‡∏´‡∏°‡∏≤‡∏Å‡∏Æ‡∏≠‡∏ï</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',sans-serif;}
body{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#ff9a9e,#fad0c4);}
.container{display:flex;flex-direction:column;align-items:center;position:relative;}
h1{color:#fff;margin-bottom:20px;text-shadow:2px 2px 5px rgba(0,0,0,0.3);}
.board-container{position:relative;width:480px;height:480px;}
.board{display:grid;grid-template-columns:repeat(8,1fr);grid-template-rows:repeat(8,1fr);width:100%;height:100%;border-radius:15px;overflow:hidden;box-shadow:0 10px 30px rgba(0,0,0,0.3);}
.cell{width:100%;height:100%;display:flex;justify-content:center;align-items:center;transition:all 0.3s ease;}
.cell.dark{background:#b58863;}
.cell.light{background:#f0d9b5;}
.piece{width:55px;height:55px;border-radius:50%;display:flex;justify-content:center;align-items:center;cursor:pointer;transition:all 0.3s ease;position:absolute;z-index:5;}
.red{background:#ff4b5c;box-shadow:0 4px 10px rgba(255,75,92,0.5);}
.black{background:#333;box-shadow:0 4px 10px rgba(0,0,0,0.5);}
.selected{box-shadow:0 0 15px 5px yellow !important;}
.result{margin-top:20px;font-size:1.5rem;color:#fff;text-shadow:1px 1px 3px rgba(0,0,0,0.3);}
button{margin-top:10px;padding:10px 20px;border:none;border-radius:10px;background:#fff;color:#ff6f91;font-weight:bold;cursor:pointer;transition:all 0.3s ease;}
button:hover{transform:scale(1.1);background:#ff6f91;color:#fff;}
.popup-bg{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);display:flex;justify-content:center;align-items:center;z-index:10;}
.popup{background:#fff;padding:30px;border-radius:20px;text-align:center;max-width:320px;width:90%;box-shadow:0 10px 40px rgba(0,0,0,0.4);}
.popup h2{margin-bottom:20px;color:#333;}
.mode-btn{margin:10px 0;padding:12px 15px;width:100%;border:none;border-radius:10px;cursor:pointer;transition:all 0.3s;font-weight:bold;font-size:1rem;}
.mode-btn:hover{transform:scale(1.05);}
.level-btn{background:#6a82fb;color:#fff;}
.pvp-btn{background:#ff6f91;color:#fff;}
</style>
</head>
<body>

<div class="container">
<h1>‡πÄ‡∏Å‡∏°‡∏´‡∏°‡∏≤‡∏Å‡∏Æ‡∏≠‡∏ï</h1>
<div class="board-container">
<div class="board" id="board"></div>
</div>
<div class="result" id="result"></div>
<button onclick="resetGame()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
</div>

<!-- Popup ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î -->
<div class="popup-bg" id="popup">
<div class="popup">
<h2>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏Å‡∏°</h2>
<button class="mode-btn pvp-btn" onclick="startGame('pvp')">‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô vs ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô</button>
<button class="mode-btn level-btn" onclick="chooseBot()">‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô vs ‡∏ö‡∏≠‡∏ó</button>
</div>
</div>

<!-- Popup ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ö‡∏≠‡∏ó -->
<div class="popup-bg" id="botPopup" style="display:none;">
<div class="popup">
<h2>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ö‡∏≠‡∏ó</h2>
<button class="mode-btn level-btn" onclick="startGame('bot',1)">Level 1 (‡∏á‡πà‡∏≤‡∏¢)</button>
<button class="mode-btn level-btn" onclick="startGame('bot',2)">Level 2 (‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á)</button>
<button class="mode-btn level-btn" onclick="startGame('bot',3)">Level 3 (‡∏¢‡∏≤‡∏Å)</button>
</div>
</div>

<script>
const boardEl=document.getElementById('board');
const resultEl=document.getElementById('result');
const popup=document.getElementById('popup');
const botPopup=document.getElementById('botPopup');

let board=[], pieces=[], mode='', botLevel=0, turn='red', selectedPiece=null, gameOver=false;
const size=60;

function initBoard(){
  boardEl.innerHTML=''; board=[]; pieces=[];
  for(let r=0;r<8;r++){
    board[r]=[];
    for(let c=0;c<8;c++){
      let cell=document.createElement('div');
      cell.classList.add('cell',(r+c)%2?'dark':'light');
      cell.dataset.row=r; cell.dataset.col=c;
      boardEl.appendChild(cell);
      board[r][c]=(r<3&&(r+c)%2)?'black':(r>4&&(r+c)%2)?'red':null;
      if(board[r][c]){
        let piece=document.createElement('div');
        piece.classList.add('piece',board[r][c]);
        piece.style.top=r*size+'px';
        piece.style.left=c*size+'px';
        piece.dataset.row=r; piece.dataset.col=c;
        boardEl.appendChild(piece); pieces.push(piece);
      }
    }
  }
}

function chooseBot(){popup.style.display='none';botPopup.style.display='flex';}
function startGame(selectedMode,level=0){mode=selectedMode; botLevel=level; popup.style.display='none'; botPopup.style.display='none'; initBoard(); turn='red'; selectedPiece=null; resultEl.textContent=''; gameOver=false;}
function resetGame(){popup.style.display='flex'; botPopup.style.display='none'; initBoard(); resultEl.textContent=''; turn='red'; selectedPiece=null; gameOver=false;}

function getPieceAt(row,col){return pieces.find(p=>parseInt(p.dataset.row)===row && parseInt(p.dataset.col)===col);}
function isValidMove(piece,toRow,toCol){
  let r=parseInt(piece.dataset.row),c=parseInt(piece.dataset.col);
  let dir=piece.classList.contains('red')?-1:1;
  if(Math.abs(toCol-c)===1 && toRow===r+dir && !getPieceAt(toRow,toCol)) return true;
  if(Math.abs(toCol-c)===2 && toRow===r+dir*2){
    let mid=getPieceAt(r+dir,(c+toCol)/2);
    if(mid && mid.classList.contains(turn==='red'?'black':'red')) return true;
  }
  return false;
}
function movePiece(piece,toRow,toCol){
  let r=parseInt(piece.dataset.row),c=parseInt(piece.dataset.col);
  if(Math.abs(toRow-r)===2){
    let midRow=(r+toRow)/2, midCol=(c+toCol)/2;
    let mid=getPieceAt(midRow,midCol);
    if(mid){mid.remove(); pieces=pieces.filter(p=>p!==mid);}
  }
  piece.dataset.row=toRow; piece.dataset.col=toCol;
  piece.style.top=toRow*size+'px'; piece.style.left=toCol*size+'px';
  checkWin(); turn=turn==='red'?'black':'red'; selectedPiece=null;
  if(mode==='bot' && turn==='black' && !gameOver) setTimeout(botMove,300);
}

boardEl.addEventListener('click',e=>{
  if(gameOver) return;
  if(!e.target.classList.contains('piece') && !e.target.classList.contains('cell')) return;
  let row=parseInt(e.target.dataset.row), col=parseInt(e.target.dataset.col);
  if(selectedPiece){
    if(isValidMove(selectedPiece,row,col)) movePiece(selectedPiece,row,col);
    else selectedPiece=null;
  } else if(e.target.classList.contains(turn)){
    selectedPiece=e.target;
    selectedPiece.classList.add('selected');
  }
  pieces.forEach(p=>{if(p!==selectedPiece)p.classList.remove('selected');});
});

function checkWin(){
  let redLeft=pieces.filter(p=>p.classList.contains('red')).length;
  let blackLeft=pieces.filter(p=>p.classList.contains('black')).length;
  if(redLeft===0){resultEl.textContent='‡∏î‡∏≥‡∏ä‡∏ô‡∏∞! üéâ'; gameOver=true;}
  if(blackLeft===0){resultEl.textContent='‡πÅ‡∏î‡∏á‡∏ä‡∏ô‡∏∞! üéâ'; gameOver=true;}
}

function botMove(){
  let botPieces=pieces.filter(p=>p.classList.contains('black'));
  let moves=[];
  botPieces.forEach(p=>{
    for(let r=Math.max(0,parseInt(p.dataset.row)-2);r<=Math.min(7,parseInt(p.dataset.row)+2);r++){
      for(let c=Math.max(0,parseInt(p.dataset.col)-2);c<=Math.min(7,parseInt(p.dataset.col)+2);c++){
        if(isValidMove(p,r,c)) moves.push({piece:p,row:r,col:c});
      }
    }
  });
  if(moves.length===0) return;
  let move=moves[Math.floor(Math.random()*moves.length)];
  movePiece(move.piece,move.row,move.col);
}
</script>

</body>
</html>
