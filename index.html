<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pop Friend</title>

<style>
body {
    margin: 0;
    height: 100vh;
    background: #ffc0cb;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    font-family: sans-serif;
    cursor: pointer; /* à¸—à¸³à¹ƒà¸«à¹‰à¹€à¸«à¹‡à¸™à¸§à¹ˆà¸²à¸à¸”à¹„à¸”à¹‰à¸—à¸±à¹‰à¸‡à¸«à¸™à¹‰à¸² */
}

img {
    width: 280px;
    max-width: 80vw;
    margin-bottom: 15px;
}

.counter {
    font-size: 22px;
    font-weight: bold;
}

select {
    margin-top: 10px;
    padding: 8px;
    border-radius: 10px;
    font-size: 16px;
}

.board {
    margin-top: 15px;
    background: white;
    padding: 15px;
    border-radius: 15px;
    width: 260px;
    text-align: center;
}
</style>
</head>
<body>

<img id="img" src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Cat_Pop_icon.png/240px-Cat_Pop_icon.png" alt="Pop Cat">

<div class="counter">à¸à¸”à¹„à¸›à¹à¸¥à¹‰à¸§: <span id="count">0</span> à¸„à¸£à¸±à¹‰à¸‡</div>

<select id="country">
    <option value="TH">ğŸ‡¹ğŸ‡­ à¹„à¸—à¸¢</option>
    <option value="JP">ğŸ‡¯ğŸ‡µ à¸à¸µà¹ˆà¸›à¸¸à¹ˆà¸™</option>
    <option value="US">ğŸ‡ºğŸ‡¸ à¸­à¹€à¸¡à¸£à¸´à¸à¸²</option>
    <option value="KR">ğŸ‡°ğŸ‡· à¹€à¸à¸²à¸«à¸¥à¸µ</option>
</select>

<div class="board" id="board"></div>

<script>
const img = document.getElementById("img");
const countEl = document.getElementById("count");
const board = document.getElementById("board");
const countrySelect = document.getElementById("country");

// à¹ƒà¸Šà¹‰ localStorage à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥
let data = JSON.parse(localStorage.getItem("popData")) || {
    total: 0,
    country: { TH: 0, JP: 0, US: 0, KR: 0 }
};

// à¸šà¸±à¸™à¸—à¸¶à¸
function save() {
    localStorage.setItem("popData", JSON.stringify(data));
}

// à¸­à¸±à¸›à¹€à¸”à¸• UI
function updateUI() {
    countEl.textContent = data.total;
    board.innerHTML = `
        ğŸŒ à¸•à¸²à¸£à¸²à¸‡à¸„à¸°à¹à¸™à¸™<br>
        ğŸ‡¹ğŸ‡­ à¹„à¸—à¸¢: ${data.country.TH}<br>
        ğŸ‡¯ğŸ‡µ à¸à¸µà¹ˆà¸›à¸¸à¹ˆà¸™: ${data.country.JP}<br>
        ğŸ‡ºğŸ‡¸ à¸­à¹€à¸¡à¸£à¸´à¸à¸²: ${data.country.US}<br>
        ğŸ‡°ğŸ‡· à¹€à¸à¸²à¸«à¸¥à¸µ: ${data.country.KR}
    `;
}

// à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸à¸”
function pop() {
    // à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸£à¸¹à¸› 1
    img.src = "https://upload.wikimedia.org/wikipedia/commons/thumb/6/6f/Cat_Pop_icon_open.png/240px-Cat_Pop_icon_open.png";
    
    // à¸à¸¥à¸±à¸šà¸£à¸¹à¸›à¹€à¸”à¸´à¸¡à¸«à¸¥à¸±à¸‡ 80ms
    setTimeout(() => {
        img.src = "https://upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Cat_Pop_icon.png/240px-Cat_Pop_icon.png";
    }, 80);

    // à¸™à¸±à¸šà¸„à¸¥à¸´à¸
    data.total++;
    data.country[countrySelect.value]++;
    save();
    updateUI();
}

// à¸à¸”à¹„à¸”à¹‰à¸—à¸±à¹‰à¸‡à¸«à¸™à¹‰à¸²
document.body.addEventListener("mousedown", pop);
document.body.addEventListener("touchstart", pop);

// à¹‚à¸«à¸¥à¸”à¸•à¸­à¸™à¹€à¸£à¸´à¹ˆà¸¡
updateUI();
</script>

</body>
</html>
