<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pop Friend</title>

<style>
body {
    margin: 0;
    height: 100vh;
    background: #ffc0cb;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    font-family: sans-serif;
    cursor: pointer;
}

img {
    width: 280px;
    max-width: 80vw;
    margin-bottom: 15px;
}

.counter {
    font-size: 22px;
    font-weight: bold;
}

select {
    margin-top: 10px;
    padding: 8px;
    border-radius: 10px;
    font-size: 16px;
}

.board {
    margin-top: 15px;
    background: white;
    padding: 15px;
    border-radius: 15px;
    width: 260px;
    text-align: center;
}
</style>
</head>
<body>

<img id="img" src="https://cdn.discordapp.com/attachments/1351475770370953226/1465184686492880937/Messenger_creation_9299DE20-9320-4418-8D2A-613E2737FF97.jpg" alt="Pop Cat">

<div class="counter">‡∏Å‡∏î‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß: <span id="count">0</span> ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</div>

<select id="country">
    <option value="TH">üáπüá≠ ‡πÑ‡∏ó‡∏¢</option>
    <option value="JP">üáØüáµ ‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô</option>
    <option value="US">üá∫üá∏ ‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏≤</option>
    <option value="KR">üá∞üá∑ ‡πÄ‡∏Å‡∏≤‡∏´‡∏•‡∏µ</option>
</select>

<div class="board" id="board"></div>

<script>
const img = document.getElementById("img");
const countEl = document.getElementById("count");
const board = document.getElementById("board");
const countrySelect = document.getElementById("country");

// ‡∏£‡∏π‡∏õ‡∏ï‡∏≠‡∏ô‡∏≠‡πâ‡∏≤‡∏õ‡∏≤‡∏Å / ‡∏õ‡∏¥‡∏î‡∏õ‡∏≤‡∏Å
const imgClosed = "https://cdn.discordapp.com/attachments/1351475770370953226/1465184686492880937/Messenger_creation_9299DE20-9320-4418-8D2A-613E2737FF97.jpg?ex=6978d7d3&is=69778653&hm=246e30199b0652025c5283829b4a2c32f63c9c2c62fa1611bd992ed8bd01250c&";
const imgOpen = "https://cdn.discordapp.com/attachments/1351475770370953226/1465184695624142919/Messenger_creation_4466CA51-C0A8-42D0-962E-A575370349F1.jpg?ex=6978d7d5&is=69778655&hm=d96fa7881e1d67704a0128cf6d4a1043cb641a09c9515832b64b7402da8b2a3c&";

// ‡πÉ‡∏ä‡πâ localStorage ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
let data = JSON.parse(localStorage.getItem("popData")) || {
    total: 0,
    country: { TH: 0, JP: 0, US: 0, KR: 0 }
};

// ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
function save() {
    localStorage.setItem("popData", JSON.stringify(data));
}

// ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï UI
function updateUI() {
    countEl.textContent = data.total;
    board.innerHTML = `
        üåç ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô<br>
        üáπüá≠ ‡πÑ‡∏ó‡∏¢: ${data.country.TH}<br>
        üáØüáµ ‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô: ${data.country.JP}<br>
        üá∫üá∏ ‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏≤: ${data.country.US}<br>
        üá∞üá∑ ‡πÄ‡∏Å‡∏≤‡∏´‡∏•‡∏µ: ${data.country.KR}
    `;
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Å‡∏î
function pop() {
    // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏π‡∏õ‡∏ï‡∏≠‡∏ô‡∏≠‡πâ‡∏≤‡∏õ‡∏≤‡∏Å
    img.src = imgOpen;
    
    // ‡∏Å‡∏•‡∏±‡∏ö‡∏£‡∏π‡∏õ‡πÄ‡∏î‡∏¥‡∏°‡∏´‡∏•‡∏±‡∏á 80ms
    setTimeout(() => {
        img.src = imgClosed;
    }, 80);

    // ‡∏ô‡∏±‡∏ö‡∏Ñ‡∏•‡∏¥‡∏Å
    data.total++;
    data.country[countrySelect.value]++;
    save();
    updateUI();
}

// ‡∏Å‡∏î‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏ô‡πâ‡∏≤
document.body.addEventListener("mousedown", pop);
document.body.addEventListener("touchstart", pop);

// ‡πÇ‡∏´‡∏•‡∏î‡∏ï‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°
updateUI();
</script>

</body>
</html>
